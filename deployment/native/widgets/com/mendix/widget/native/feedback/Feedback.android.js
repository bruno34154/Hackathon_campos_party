import{Image}from"mendix/components/native/Image";import*as React from"react";import{useMemo,Component,createElement,Fragment}from"react";import{useColorScheme,TouchableOpacity,Text,StyleSheet,Platform,PlatformColor,Animated,Easing,Modal as Modal$1,TouchableWithoutFeedback,KeyboardAvoidingView,View,TextInput,Pressable,Switch,Dimensions,InteractionManager,Image as Image$1,ActivityIndicator}from"react-native";import{captureScreen}from"react-native-view-shot";function exclude(source,exclusionKeys){return Object.keys(source).filter((key=>-1===exclusionKeys.findIndex((k=>k===key)))).reduce(((result,key)=>Object.assign(Object.assign({},result),{[key]:source[key]})),{})}function only(source,selectionKeys){return selectionKeys.filter((key=>void 0!==source[key])).reduce(((result,key)=>Object.assign(Object.assign({},result),{[key]:source[key]})),{})}const useTheme=buildStyles=>{const colorScheme=useColorScheme(),isDark="dark"===colorScheme,styles=useMemo((()=>buildStyles(isDark)),[buildStyles,isDark]);return{theme:colorScheme,isDark:isDark,styles:styles}};var __rest$7=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const COLOR="#169689",DialogButton=props=>{const{label:label,color:color=COLOR,disabled:disabled=!1,bold:bold,onPress:onPress,style:style}=props,nodeProps=__rest$7(props,["label","color","disabled","bold","onPress","style"]),fontWeight=bold?"600":"normal",{styles:styles}=useTheme(buildStyles$6);return React.createElement(TouchableOpacity,{style:[styles.button],onPress:onPress,disabled:disabled},React.createElement(Text,Object.assign({style:[styles.text,{color:color,fontWeight:fontWeight},style]},nodeProps),label))};DialogButton.displayName="DialogButton";const buildStyles$6=isDark=>StyleSheet.create({button:Platform.select({ios:{flexGrow:1,flexShrink:1,height:46,justifyContent:"center",alignItems:"center"},android:{justifyContent:"center",alignItems:"center"},web:{justifyContent:"center",alignItems:"center"},default:{}}),text:Platform.select({ios:{color:PlatformColor("link"),textAlign:"center",fontSize:17,backgroundColor:"transparent"},android:{color:PlatformColor("@android:color/"+(isDark?"link_text_dark":"link_text_dark_light")),textAlign:"center",backgroundColor:"transparent",padding:8,fontSize:14,textTransform:"uppercase"},web:{textAlign:"center",backgroundColor:"transparent",padding:8,fontSize:14,textTransform:"uppercase"},default:{}})});var __rest$6=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const CONTENT_ANIMATION_IN=Platform.select({ios:{opacity:{inputRange:[0,1],outputRange:[0,1]},scale:{inputRange:[0,.5,1],outputRange:[1.2,1.1,1]}},android:{opacity:{inputRange:[0,.5,1],outputRange:[0,1,1]},scale:{inputRange:[0,1],outputRange:[.3,1]}},default:{opacity:{inputRange:[0,.5,1],outputRange:[0,1,1]},scale:{inputRange:[0,1],outputRange:[.3,1]}}}),CONTENT_ANIMATION_OUT=Platform.select({default:{opacity:{inputRange:[0,1],outputRange:[0,1]}}});class Modal extends Component{constructor(){super(...arguments),this.state={visible:Boolean(this.props.visible),currentAnimation:"none"},this.animVal=new Animated.Value(0),this._isMounted=!1,this.show=()=>{this.setState({visible:!0,currentAnimation:"in"},(()=>{Animated.timing(this.animVal,{easing:Easing.inOut(Easing.quad),useNativeDriver:Boolean(this.props.useNativeDriver),duration:300,toValue:1}).start((()=>{this.setState({currentAnimation:"none"})}))}))},this.hide=()=>{this.setState({currentAnimation:"out"},(()=>{Animated.timing(this.animVal,{easing:Easing.inOut(Easing.quad),useNativeDriver:Boolean(this.props.useNativeDriver),duration:300,toValue:0}).start((()=>{this._isMounted&&(this.setState({currentAnimation:"none"}),this.setState({visible:!1},this.props.onHide))}))}))}}componentDidMount(){this._isMounted=!0,this.state.visible&&this.show()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(prevProps){this.props.visible&&!prevProps.visible?this.show():!this.props.visible&&prevProps.visible&&this.hide()}render(){const _a=this.props,{children:children,onBackdropPress:onBackdropPress,contentStyle:contentStyle}=_a,otherProps=__rest$6(_a,["children","onBackdropPress","contentStyle"]),{currentAnimation:currentAnimation,visible:visible}=this.state,backdropAnimatedStyle={opacity:this.animVal.interpolate({inputRange:[0,1],outputRange:[0,.3]})},contentAnimatedStyle="in"===currentAnimation?{opacity:this.animVal.interpolate({inputRange:CONTENT_ANIMATION_IN.opacity.inputRange,outputRange:CONTENT_ANIMATION_IN.opacity.outputRange,extrapolate:"clamp"}),transform:[{scale:this.animVal.interpolate({inputRange:CONTENT_ANIMATION_IN.scale.inputRange,outputRange:CONTENT_ANIMATION_IN.scale.outputRange,extrapolate:"clamp"})}]}:{opacity:this.animVal.interpolate({inputRange:CONTENT_ANIMATION_OUT.opacity.inputRange,outputRange:CONTENT_ANIMATION_OUT.opacity.outputRange,extrapolate:"clamp"})};return React.createElement(Modal$1,Object.assign({transparent:!0,animationType:"none"},otherProps,{visible:visible}),React.createElement(TouchableWithoutFeedback,{onPress:onBackdropPress},React.createElement(Animated.View,{style:[styles.backdrop,backdropAnimatedStyle]})),visible&&React.createElement(Animated.View,{style:[styles.content,contentAnimatedStyle,contentStyle],pointerEvents:"box-none",needsOffscreenAlphaCompositing:["in","out"].includes(currentAnimation)},children))}}Modal.defaultProps={onBackdropPress:()=>null,onHide:()=>null,visible:!1,useNativeDriver:!1};const styles=StyleSheet.create({backdrop:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"black",opacity:0},content:{flex:1,alignItems:"center",justifyContent:"center"}});var __rest$5=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const DialogTitle=props=>{const{style:style,children:children}=props,nodeProps=__rest$5(props,["style","children"]),{styles:styles}=useTheme(buildStyles$5);return React.createElement(Text,Object.assign({style:[styles.text,style]},nodeProps),children)};DialogTitle.displayName="DialogTitle";const buildStyles$5=isDark=>StyleSheet.create({text:Platform.select({ios:{color:PlatformColor("label"),textAlign:"center",fontSize:18,fontWeight:"600"},android:{color:PlatformColor("@android:color/"+(isDark?"primary_text_dark":"primary_text_light")),fontWeight:"500",fontSize:18},web:{fontWeight:"500",fontSize:18},default:{}})});var __rest$4=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const DialogDescription=props=>{const{style:style,children:children}=props,nodeProps=__rest$4(props,["style","children"]),{styles:styles}=useTheme(buildStyles$4);return React.createElement(Text,Object.assign({style:[styles.text,style]},nodeProps),children)};DialogDescription.displayName="DialogDescription";const buildStyles$4=isDark=>StyleSheet.create({text:Platform.select({ios:{textAlign:"center",color:PlatformColor("label"),fontSize:13,marginTop:4},android:{color:PlatformColor("@android:color/"+(isDark?"secondary_text_dark":"secondary_text_light")),fontSize:16,marginTop:10},web:{color:"#33383D",fontSize:16,marginTop:10},default:{}})});var __rest$3=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const buildStyles$3=()=>StyleSheet.create({centeredView:{marginTop:22},blur:{position:"absolute",backgroundColor:PlatformColor("systemGray6"),top:0,left:0,bottom:0,right:0},content:Platform.select({ios:{width:270,flexDirection:"column",borderRadius:13,overflow:"hidden"},android:{backgroundColor:PlatformColor("?attr/colorBackgroundFloating"),flexDirection:"column",borderRadius:3,padding:16,margin:16,overflow:"hidden",elevation:4,minWidth:300},web:{flexDirection:"column",borderRadius:3,padding:16,margin:16,backgroundColor:"white",overflow:"hidden",elevation:4,minWidth:300},default:{}}),header:Platform.select({ios:{margin:18},android:{margin:12},web:{margin:12},default:{}}),footer:Object.assign({flexDirection:"row"},Platform.select({ios:{justifyContent:"space-between"},android:{alignItems:"center",justifyContent:"flex-end",marginTop:4},web:{alignItems:"center",justifyContent:"flex-end",marginTop:4},default:{}})),footerVertical:{flexDirection:"column"},buttonSeparatorHorizontal:{height:"100%",backgroundColor:PlatformColor("separator"),width:StyleSheet.hairlineWidth},buttonSeparatorVertical:{width:"100%",backgroundColor:PlatformColor("separator"),height:StyleSheet.hairlineWidth}});var __rest$2=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const DialogInput=props=>{const{label:label,style:style,wrapperStyle:wrapperStyle,textInputRef:textInputRef,multiline:multiline,numberOfLines:numberOfLines}=props,nodeProps=__rest$2(props,["label","style","wrapperStyle","textInputRef","multiline","numberOfLines"]),lines=multiline&&numberOfLines||1,height=18+Platform.select({ios:14,android:22,default:0})*lines,{styles:styles,isDark:isDark}=useTheme(buildStyles$2);return React.createElement(View,{style:[styles.textInputWrapper,wrapperStyle]},label&&React.createElement(Text,{style:styles.label},label),React.createElement(TextInput,Object.assign({ref:textInputRef,placeholderTextColor:PlatformColor("@android:color/"+(isDark?"hint_foreground_dark":"hint_foreground_light")),underlineColorAndroid:PlatformColor("@android:color/"+(isDark?"hint_foreground_dark":"hint_foreground_light")),style:[styles.textInput,style,{height:height}],multiline:multiline,numberOfLines:numberOfLines},nodeProps)))};DialogInput.displayName="DialogInput";const buildStyles$2=isDark=>StyleSheet.create({textInputWrapper:Platform.select({ios:{backgroundColor:PlatformColor("systemGray5"),borderWidth:StyleSheet.hairlineWidth,borderRadius:6,borderColor:PlatformColor("separator"),marginHorizontal:20,marginBottom:20,paddingHorizontal:8},android:{marginHorizontal:10,marginBottom:20},default:{}}),label:Platform.select({ios:{color:PlatformColor("label")},android:{color:PlatformColor("@android:color/"+(isDark?"primary_text_dark":"primary_text_light")),fontSize:14},default:{}}),textInput:Platform.select({ios:{color:PlatformColor("label")},android:{color:PlatformColor("@android:color/"+(isDark?"primary_text_dark":"primary_text_light")),marginLeft:-4,paddingLeft:4},default:{}})});var __rest$1=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const DialogCodeInput=props=>{const{style:style,wrapperStyle:wrapperStyle,digitContainerStyle:digitContainerStyle,digitContainerFocusedStyle:digitContainerFocusedStyle,digitStyle:digitStyle,codeLength:codeLength=4,onCodeChange:onCodeChange}=props,nodeProps=__rest$1(props,["style","wrapperStyle","digitContainerStyle","digitContainerFocusedStyle","digitStyle","codeLength","onCodeChange"]),{styles:styles}=useTheme(buildStyles$1),codeRef=React.useRef(null),[containerIsFocused,setContainerIsFocused]=React.useState(props.autoFocus||!1),[code,setCode]=React.useState(""),codeDigitsArray=new Array(codeLength).fill(0);return React.createElement(View,{style:[styles.textInputWrapper,wrapperStyle]},React.createElement(Pressable,{onPress:()=>{var _a;setContainerIsFocused(!0),null===(_a=null==codeRef?void 0:codeRef.current)||void 0===_a||_a.focus()},style:[styles.codeContainer,style]},codeDigitsArray.map(((_value,idx)=>{const digit=code[idx]||" ",isCurrentDigit=idx===code.length,isLastDigit=idx===codeLength-1,isCodeFull=code.length===codeLength,containerStyle=containerIsFocused&&(isCurrentDigit||isLastDigit&&isCodeFull)?[styles.inputContainer,digitContainerStyle,styles.inputContainerFocused,digitContainerFocusedStyle]:[styles.inputContainer,digitContainerStyle];return React.createElement(View,{key:idx,style:containerStyle},React.createElement(Text,{style:[styles.inputText,digitStyle]},digit))}))),React.createElement(TextInput,Object.assign({ref:codeRef,style:styles.hiddenInput,keyboardType:"number-pad",returnKeyType:"done",textContentType:"oneTimeCode",onSubmitEditing:()=>setContainerIsFocused(!1),maxLength:codeLength,onChangeText:t=>{var _a;setCode(t),"function"==typeof onCodeChange&&onCodeChange(t),t.length===codeLength&&(setContainerIsFocused(!1),null===(_a=null==codeRef?void 0:codeRef.current)||void 0===_a||_a.blur())}},nodeProps)))};DialogCodeInput.displayName="DialogCodeInput";const buildStyles$1=isDark=>StyleSheet.create({codeContainer:{width:"90%",flexDirection:"row",alignSelf:"center",justifyContent:"space-between",marginBottom:20},inputContainer:Object.assign({flex:1,borderColor:PlatformColor("separator"),borderBottomWidth:3,paddingBottom:5,marginHorizontal:5,alignItems:"center"},Platform.select({ios:{borderColor:PlatformColor("separator")},android:{borderColor:isDark?"#efefef":"#8d8d8d"},default:{}})),inputContainerFocused:Platform.select({ios:{borderColor:PlatformColor("label")},android:{borderColor:isDark?"#58c7b9":"#169689"},default:{}}),inputText:Platform.select({ios:{fontSize:20,color:PlatformColor("label")},android:{color:PlatformColor("@android:color/"+(isDark?"primary_text_dark":"primary_text_light")),fontSize:20},default:{}}),label:Platform.select({ios:{color:PlatformColor("label")},android:{color:PlatformColor("@android:color/"+(isDark?"primary_text_dark":"primary_text_light")),fontSize:14},default:{}}),hiddenInput:{position:"absolute",height:0,width:0,opacity:0}});var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const DialogSwitch=props=>{const{label:label}=props,nodeProps=__rest(props,["label"]),{styles:styles}=useTheme(buildStyles);return React.createElement(View,{style:styles.switchWrapper},React.createElement(Text,{style:styles.label},label),React.createElement(Switch,Object.assign({},nodeProps)))};DialogSwitch.displayName="DialogSwitch";const buildStyles=isDark=>StyleSheet.create({switchWrapper:Platform.select({ios:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginHorizontal:20,marginBottom:14,paddingHorizontal:8},android:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginHorizontal:10,marginBottom:20},default:{}}),label:Platform.select({ios:{flex:1,paddingRight:8,fontSize:13,color:PlatformColor("label")},android:{flex:1,paddingRight:8,fontSize:16,color:PlatformColor("@android:color/"+(isDark?"primary_text_dark":"primary_text_light"))},default:{}})});var Dialog_Button=DialogButton,Dialog_Container=props=>{const{blurComponentIOS:blurComponentIOS,buttonSeparatorStyle:buttonSeparatorStyle,children:children,contentStyle:contentStyle,footerStyle:footerStyle,headerStyle:headerStyle,blurStyle:blurStyle,visible:visible=!1,verticalButtons:verticalButtons=!1,keyboardVerticalOffset:keyboardVerticalOffset=40}=props,nodeProps=__rest$3(props,["blurComponentIOS","buttonSeparatorStyle","children","contentStyle","footerStyle","headerStyle","blurStyle","visible","verticalButtons","keyboardVerticalOffset"]),titleChildrens=[],descriptionChildrens=[],buttonChildrens=[],otherChildrens=[],{styles:styles}=useTheme(buildStyles$3);return React.Children.forEach(children,(child=>{if("object"==typeof child&&null!==child&&"type"in child)switch(child.type){case DialogTitle:return void titleChildrens.push(child);case DialogDescription:return void descriptionChildrens.push(child);case DialogButton:return void buttonChildrens.push(child)}otherChildrens.push(child)})),React.createElement(Modal,Object.assign({renderToHardwareTextureAndroid:!0,transparent:!0,visible:visible},nodeProps),React.createElement(KeyboardAvoidingView,{behavior:void 0,keyboardVerticalOffset:void 0,style:styles.centeredView},React.createElement(View,{style:[styles.content,contentStyle]},!1,!1,React.createElement(View,{style:[styles.header,headerStyle]},titleChildrens,descriptionChildrens),otherChildrens,Boolean(buttonChildrens.length)&&React.createElement(React.Fragment,null,!1,React.createElement(View,{style:[styles.footer,verticalButtons?styles.footerVertical:null,footerStyle]},buttonChildrens.map(((x,i)=>React.cloneElement(x,{key:`dialog-button-${i}`}))))))))},Dialog_Description=DialogDescription,Dialog_Title=DialogTitle;const imageStyle={width:30,height:30,resizeMode:"contain",margin:5},commentIcon={uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAC/VBMVEUAAAAA//8Jl9kElNsGldoFlNoGldwFlNoEldsFltsFldsFldwFldsFldsFldsFldsGldsFldsFldsGltsFldsFlNsElNoFltwElNoGmNsAi9EAgL8GlNsGldsGlNsEldsFltsFldsEldsFlNsFldwEltsElN0AnNUIltoFldwFlNsFldsEldsEltsAjuMIk9gFltoFldsEldsFlNsFldsEltoAktsAqtUEldwFldwFldsFldsGldwFldwIlN4HldsFlNoFldsFlNsGldsHltgElNoFlNsFldsFldsFltwAlNcJktsFldsEldoDlNoAgP8FltwFltsFldsEltsAmcwFldoHktsFldsFldsFldsFldwFltsGldwFltwElNsGlNsFltoGldsFldsEldsFldsFlNsGk90FldsFldsGltsFlNsFlNsHldwAld8GldwEldwFldsFldsFltsEld0AktsHmN0GltsGltsEl9wFldsGlNsAl9wFk90FldoFldsGldoFltoEk9sGldsFldwGldwFldsAmeYFktkFltsAldUFldsKk9gAqv8GldsFldsFld0Gk9oFldsEltsEk9wAndgElNsFldsEk9sGldoFlNsEldoHltsAluEElNsFldsFldsFldsAktsFldsAj98FldwGlNwAmd0FldsGltoFldsAn98FlNsAmdkFldoEldsFldsGltwEldoFldsFldsFldwGldsDlN0FldsFlNsFldoFlNsFldsGk9kFldsFldwFldsFldoFltsFldsEltsAkN4Glt4FltsFldsFl9sFltsFldsGl9wFldsFldoFldsJmd0FldsGldoFlNsEltkGldsEldwGltsGlNsFldsAmdYFldsFldsEldsFldwFldwIl9cEldwGltwEldwFldsFl9kFlNoGldoFlNoFldsGlNwEldsEldwEldwFldsFldsHlN0EldsFldoFldsGltwJldwFlNsElNoGldoFldwFldsGlNsFldoDltwFlNsDltrcgeKMAAAA/3RSTlMAARs5Um6JoK+/z9/u/f/159fHuKiUfF9FKgsEK1uGq9D2472YckMSIl7J4LA/CSFoqeX5xkQHBkiR2fS0bB9NmerVgCc+nvHMbRMc3a5MAjOi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"},activityIndicatorStyle={marginBottom:Platform.select({ios:15,android:0})},switchContainer={flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:10,paddingHorizontal:Platform.select({ios:10,android:0})},defaultFeedbackStyle={floatingButton:{flexDirection:"column",borderRadius:7,backgroundColor:"#fff",shadowColor:"000",shadowOpacity:.3,shadowOffset:{width:2,height:5},elevation:2.5},dialog:{},title:{},textAreaInput:{fontSize:16,fontFamily:Platform.select({ios:"System",android:"normal"}),color:"#666",borderColor:"#eee",backgroundColor:"#FFF",padding:10,...Platform.select({ios:{borderTopWidth:1,borderLeftWidth:0,borderBottomWidth:1,borderRightWidth:0},android:{borderWidth:1,borderRadius:Platform.select({ios:10,android:5})}}),height:100,textAlignVertical:"top",placeholderTextColor:"#888",selectionColor:"#aaa",underlineColorAndroid:"transparent",numberOfLines:5},switchLabel:{color:"#444",fontFamily:Platform.select({ios:"System",android:"normal"}),fontSize:16},switchInput:{margin:0,padding:0,marginRight:Platform.select({ios:0,android:-5})},button:{borderColor:"#eee",borderWidth:1,color:Platform.select({ios:"#007ff9",default:"#169689"})},buttonDisabled:{color:"gray"},activityIndicator:{color:"#666"}};class Feedback extends Component{constructor(){super(...arguments),this.state={status:"initial",sendScreenshot:!0,feedbackMessage:"",screenshot:"",deviceHeight:Dimensions.get("screen").height},this.onFeedbackButtonPressHandler=this.onFeedbackButtonPress.bind(this),this.onChangeTextHandler=this.onChangeText.bind(this),this.onScreenshotToggleChangeHandler=this.onScreenshotToggleValueChange.bind(this),this.onCancelHandler=this.onCancel.bind(this),this.onSendHandler=this.onSend.bind(this),this.styles=function(defaultStyle,overrideStyles){const styles=[defaultStyle,...overrideStyles.filter((object=>void 0!==object))];return Object.keys(defaultStyle).reduce(((flattened,currentKey)=>{const styleItems=styles.map((object=>object[currentKey]));return Object.assign(Object.assign({},flattened),{[currentKey]:(objects=styleItems,objects.reduce(((merged,object)=>Object.assign(Object.assign({},merged),object)),{}))});var objects}),{})}(defaultFeedbackStyle,this.props.style),this.processedStyles=function(styles){const textInputStylePropsKeys=["placeholderTextColor","selectionColor","underlineColorAndroid","numberOfLines"],blurStylePropKeys=["backgroundColor","opacity"],switchPropKeys=["thumbColorOn","thumbColorOff","trackColorOn","trackColorOff"],textAreaInputStyles=exclude(styles.textAreaInput,textInputStylePropsKeys),textAreaInputProps=only(styles.textAreaInput,textInputStylePropsKeys),switchInputStyles=exclude(styles.switchInput,switchPropKeys),switchInputProps=only(styles.switchInput,switchPropKeys),borderIos=Platform.select({ios:{borderTopColor:styles.button.borderColor,borderTopWidth:styles.button.borderWidth},android:{}}),buttonSeparatorIos=Platform.select({ios:{backgroundColor:styles.button.borderColor,width:styles.button.borderWidth},android:{}}),blurStyle=Platform.select({ios:only(styles.dialog,blurStylePropKeys),android:{}});return{textAreaInputStyles:textAreaInputStyles,textAreaInputProps:textAreaInputProps,switchInputStyles:switchInputStyles,switchInputProps:switchInputProps,borderIos:borderIos,buttonSeparatorIos:buttonSeparatorIos,dialogStyle:Platform.select({ios:exclude(styles.dialog,blurStylePropKeys),android:styles.dialog}),blurStyle:blurStyle,descriptionStyle:only(styles.textAreaInput,["color","fontSize","fontFamily","fontWeight"])}}(this.styles),this.dialogContainerProps={contentStyle:this.processedStyles.dialogStyle,buttonSeparatorStyle:this.processedStyles.buttonSeparatorIos,footerStyle:this.processedStyles.borderIos,blurStyle:this.processedStyles.blurStyle,supportedOrientations:["portrait","landscape"]},this.updateDeviceHeight=({screen:{height:height}})=>{this.setState({deviceHeight:height})}}componentDidMount(){Dimensions.addEventListener("change",this.updateDeviceHeight)}componentDidUpdate(_,prevState){["todo","inprogress"].includes(prevState.status)&&"closingDialog"===this.state.status&&this.state.nextStatus&&InteractionManager.runAfterInteractions((()=>this.setState((({nextStatus:nextStatus})=>({status:nextStatus||"initial",nextStatus:void 0})))))}render(){return createElement(Fragment,null,this.renderFloatingButton(),this.renderTodoDialog(),this.renderInProgressDialog(),this.renderDoneDialog(),this.renderErrorDialog())}renderFloatingButton(){return"initial"===this.state.status?createElement(View,{style:(deviceHeight=this.state.deviceHeight,{position:"absolute",right:0,top:0,marginTop:deviceHeight/2-100,zIndex:9999})},createElement(View,{style:this.styles.floatingButton},createElement(TouchableOpacity,{onPress:this.onFeedbackButtonPressHandler,testID:`${this.props.name}$button`},this.props.logo&&this.props.logo.value?createElement(Image,{style:imageStyle,source:this.props.logo.value}):null,createElement(Image$1,{style:imageStyle,source:commentIcon})))):null;var deviceHeight}renderTodoDialog(){const{button:button,buttonDisabled:buttonDisabled,switchInput:switchInput}=this.styles,trackColor={true:switchInput.trackColorOn||"",false:switchInput.trackColorOff||""},thumbColor=this.state.sendScreenshot?switchInput.thumbColorOn:switchInput.thumbColorOff,disabled=0===this.state.feedbackMessage.trim().length,sendButtonColor=disabled&&buttonDisabled.color?buttonDisabled.color:button.color;return createElement(Dialog_Container,{visible:"todo"===this.state.status,testID:`${this.props.name}$popup`,...this.dialogContainerProps},createElement(Dialog_Title,{style:this.styles.title},"Send Feedback"),createElement(TextInput,{testID:`${this.props.name}$input`,multiline:!0,style:this.processedStyles.textAreaInputStyles,value:this.state.feedbackMessage,onChangeText:this.onChangeTextHandler,placeholder:"Type your feedback here",...this.processedStyles.textAreaInputProps}),this.props.allowScreenshot&&createElement(View,{style:switchContainer},createElement(Text,{style:this.styles.switchLabel},"Include Screenshot"),createElement(Switch,{testID:`${this.props.name}$switch`,style:this.processedStyles.switchInputStyles,value:this.state.sendScreenshot,onValueChange:this.onScreenshotToggleChangeHandler,trackColor:trackColor,thumbColor:thumbColor})),createElement(Dialog_Button,{label:"Cancel",color:this.styles.button.color,onPress:this.onCancelHandler,testID:`${this.props.name}$cancel`}),createElement(Dialog_Button,{label:"Send",disabled:disabled,color:sendButtonColor,onPress:this.onSendHandler,testID:`${this.props.name}$send`}))}renderInProgressDialog(){return createElement(Dialog_Container,{visible:"inprogress"===this.state.status,...this.dialogContainerProps},createElement(Dialog_Title,{style:this.styles.title},"Sending..."),createElement(ActivityIndicator,{color:this.styles.activityIndicator.color,size:"large",style:activityIndicatorStyle}))}renderDoneDialog(){return createElement(Dialog_Container,{visible:"done"===this.state.status,...this.dialogContainerProps},createElement(Dialog_Title,{style:this.styles.title},"Result"),createElement(Dialog_Description,{style:this.processedStyles.descriptionStyle,testID:`${this.props.name}$success`},"Feedback successfully sent"),createElement(Dialog_Button,{label:"OK",onPress:this.onCancelHandler,color:this.styles.button.color,testID:`${this.props.name}$success$ok`}))}renderErrorDialog(){return createElement(Dialog_Container,{visible:"error"===this.state.status,...this.dialogContainerProps},createElement(Dialog_Title,{style:this.styles.title},"Result"),createElement(Dialog_Description,{style:this.processedStyles.descriptionStyle,testID:`${this.props.name}$error`},"Error sending feedback"),createElement(Dialog_Button,{label:"OK",onPress:this.onCancelHandler,color:this.styles.button.color,testID:`${this.props.name}$error$ok`}))}onFeedbackButtonPress(){this.setState({status:"takingScreenshot"},(async()=>{const screenshot=await this.getScreenshot();this.setState({status:"todo",screenshot:screenshot})}))}onChangeText(value){this.setState({feedbackMessage:value})}onScreenshotToggleValueChange(value){this.setState({sendScreenshot:value})}onCancel(){this.setState({status:"initial",nextStatus:void 0})}async onSend(){this.setState({status:"closingDialog",nextStatus:"inprogress"});const success=await async function(data){const body={title:data.feedbackMsg?data.feedbackMsg.substring(0,200):"",description:data.feedbackMsg?data.feedbackMsg.substring(200):"",issueType:"Issue",submitter:{userId:"",email:"unknown@example.com",displayName:"Unknown Native User"},metadata:{userRoles:"",location:"",form:"",userAgent:"Native for android",screenWidth:Math.round(Dimensions.get("window").width),screenHeight:Math.round(Dimensions.get("window").height)},imageAttachment:data.screenshot};return fetch(`https://feedback-api.mendix.com/rest/v3/feedbackapi/projects/${data.sprintrAppId}/issues`,{method:"POST",body:JSON.stringify(body),headers:{"Content-Type":"application/json",ClientIdentifier:"feedback-native-v2"},mode:"no-cors",referrer:"no-referrer"}).then((response=>response.ok)).catch((()=>!1))}({feedbackMsg:this.state.feedbackMessage,sprintrAppId:this.props.sprintrapp,screenshot:this.state.sendScreenshot?this.state.screenshot:""});this.setState({status:"closingDialog",nextStatus:success?"done":"error",feedbackMessage:"",screenshot:""})}async getScreenshot(){if(!this.props.allowScreenshot)return Promise.resolve("");try{return(await captureScreen({format:"jpg",result:"base64",quality:.4})).replace(/(\r\n|\n|\r)/gm,"")}catch{return""}}}export{Feedback};
